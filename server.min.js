const express=require("express"),http=require("http"),cors=require("cors"),db=require("./DataBaseConnection"),dataVerify=require("./Utils/DataVerification"),authentification=require("./Routes/Authentification"),user=require("./Routes/User");db.connect(err=>{console.log(err||"Connected")});const app=express(),server=http.createServer(app);app.use(express.json()),app.use(cors()),app.post((req,res,next)=>{console.log("Middleware authentification",req.body);const{key:key,cookie:cookie,dateTime:dateTime,data:data}=req.body;dataVerify(key,cookie,dateTime,data)?"ServerCode"!==req.body.key?res.sendStatus("401"):next():res.sendStatus("400")}),app.use("/authentification",authentification),app.use("/Account",user),server.listen(process.env.PORT||8e3,()=>{console.log("Server started on port: "+(process.env.PORT||8e3))});